CREATE TABLE account (
user_id SERIAL NOT NULL PRIMARY KEY,
user_name VARCHAR(50) UNIQUE NOT NULL,
real_name VARCHAR(50) NOT NULL,
password VARCHAR(255) NOT NULL,
todo INT DEFAULT 0,
ongoing INT DEFAULT 0,
done INT DEFAULT 0
);

CREATE TABLE room (
room_id SERIAL NOT NULL PRIMARY KEY,
room_name VARCHAR(50) NOT NULL
);

CREATE TABLE account_room (
user_id INT REFERENCES account ON DELETE RESTRICT,
room_id INT REFERENCES room ON DELETE CASCADE,
PRIMARY KEY (user_id, room_id)
);

CREATE TABLE todos (
todo_id SERIAL NOT NULL PRIMARY KEY,
status SMALLINT NOT NULL,
todo TEXT,
create_time TIMESTAMP(0) DEFAULT NOW(),
room_id INT REFERENCES room ON DELETE CASCADE,
user_id INT REFERENCES account
);

CREATE TABLE activity (
act_id SERIAL NOT NULL PRIMARY KEY,
user_id INT REFERENCES account ON DELETE CASCADE,
whatdo VARCHAR(255) NOT NULL,
whendo TIMESTAMP(0) DEFAULT NOW(),
wheredo INT REFERENCES room ON DELETE CASCADE
);
